import{m as te,o as ae,v as ne,n as oe,r as s,ab as z,h as G,j as a,R as se}from"./vendor-Z3tYsDUR.js";import ie from"./CommonBanner-DOXs5XQw.js";import{L as ce}from"./Loader2-B0yoAr14.js";import re from"./ConfirmModal-CWGZRiNR.js";import{K as le}from"./KundliVariabls-CWT1Vw7D.js";import{C as I,U as de,L as pe,y as me,u as ue,B as xe,A as _,x as V,b2 as ge,b3 as T,v as d,Y as he,D as fe}from"./index-CA7lLIcV.js";import{N as _e}from"./NoDataFound-DdJnJfzR.js";import"./loader4-dvcpAguw.js";import"./CustomWhiteButton-DxPqXzdC.js";import"./No_Data_Found-BlLxs6qj.js";const Le=()=>{const r=te(),j=ae(),{t:l}=ne(),D=oe(e=>e?.masterSlice?.loader),c=JSON.parse(localStorage.getItem(I?.AUTH_KEY)),i=de(),[Ee,K]=s.useState(""),[L,E]=s.useState(""),[H,g]=s.useState(""),[w,P]=s.useState([]),[h,y]=s.useState([]),[R,N]=s.useState([]),p=localStorage?.getItem(I?.LANGUAGE_KEY)?localStorage?.getItem(I?.LANGUAGE_KEY):pe?.ENGLISH,[m,A]=s.useState([]),[O,k]=s.useState(!1),M=e=>{const t=["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"],n=t,S=o=>n?.find(u=>u===o),Q=o=>n[(o-1+12)%12],W=o=>n?.indexOf(o)+1,C={};e?.house_no?.forEach(o=>{C[parseInt(o.number)]=o?.planets});const X=(()=>{const o=C[1];if(!o)return 0;const u=o.find(b=>b.name==="As");if(!u)return 0;const x=S(u.zodiac);return x?W(x):0})(),U=[];for(let o=1;o<=12;o++){const u=(X+o-2)%12+1,x=Q(u);if(!x)continue;const b=C[o]?.map(v=>v.name)||[],Y=t.findIndex(v=>v===x),ee=Y!==-1?Y+1:null;U.push({house:o,zodiac:x,signNo:ee,planets:b})}A(U)},f=e=>e!=null&&e!=="",[B,$]=z.useKeenSlider({loop:!1,mode:"free",slides:{perView:5,spacing:15},breakpoints:{"(max-width: 1440px)":{slides:{perView:3,spacing:15}},"(max-width: 1024px)":{slides:{perView:3,spacing:15}},"(max-width: 768px)":{slides:{perView:3,spacing:10}},"(max-width: 480px)":{slides:{perView:2,spacing:8}}}}),[q,Z]=z.useKeenSlider({loop:!1,mode:"free",slides:{perView:5,spacing:15},breakpoints:{"(max-width: 768px)":{slides:{perView:3,spacing:10}},"(max-width: 480px)":{slides:{perView:2,spacing:8}}}});s.useEffect(()=>{$.current?.update()},[h]),s.useEffect(()=>{Z.current?.update()},[w]);const F=(e,t)=>{V(r,"predictionPage"),i?.PREDICTION===location?.pathname?m?.length>0&&T({lagnaData:m,category:e,subcategory:t,lang:p,type:"kundli_prediction"}).then(n=>{n?.code===_?.SUCCESS?(N([{value:n?.data}]),E(e),g(t),d(r)):d(r)}):i?.GENERAL_PREDICTION===location?.pathname&&T({category:e,subcategory:t,lang:p,type:"general_prediction"}).then(n=>{n?.code===_?.SUCCESS?(N([{value:n?.data}]),E(e),g(t),d(r)):d(r)})};console.log("location?.pathname",location?.pathname),console.log("location?.pathname PREDICTION",i?.PREDICTION),s.useEffect(()=>{if(i?.PREDICTION===location?.pathname)if(f(c?.dob)&&f(c?.time_of_birth)&&f(c?.tz)&&f(c?.longitude)&&f(c?.latitude)){let e={dob:ue(c?.dob,fe?.DATE_SLASH_FORMAT),tob:me(c?.time_of_birth,he?.TIME_24_HOUR_FORMAT),tz:c?.tz,lat:c?.latitude,lon:c?.longitude,lang:p,div:le.D1,transit_date:G().format("DD/MM/YYYY"),year:G().format("YYYY")};xe(e).then(t=>{t?.code===_?.SUCCESS?M(t?.data?.response):A([])})}else k(!0)},[p,location.pathname]),s.useEffect(()=>{const e={};i?.PREDICTION===location?.pathname?m?.length>0&&(e.type="kundli_prediction"):i?.GENERAL_PREDICTION===location?.pathname&&(e.type="general_prediction"),Object.keys(e).length>0&&(V(r,"predictionPage"),ge(e).then(t=>{t?.code===_?.SUCCESS?(P(t?.data),y(t?.data?.contentList[0]?.subcategories),N([t?.data?.contentList[0]?.subcategories[0]]),g(t?.data?.contentList[0]?.subcategories[0]?.value),E(t?.data?.contentList[0].value),T({...i?.PREDICTION===location?.pathname&&{lagnaData:m},...i?.PREDICTION===location?.pathname?{type:"kundli_prediction"}:{type:"general_prediction"},category:t?.data?.contentList[0].value,subcategory:t?.data?.contentList[0]?.subcategories[0].value,lang:p}).then(n=>{n?.code===_?.SUCCESS?(N([{value:n?.data}]),d(r)):d(r)})):(P([]),d(r))}))},[p,m,location.pathname]),s.useEffect(()=>{h.length&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},0)},[h,w,m]);const J=e=>e.split(`
`).map((t,n)=>a.jsxs(se.Fragment,{children:[t,a.jsx("br",{})]},n));return a.jsxs(a.Fragment,{children:[a.jsx(ie,{text:i?.PREDICTION===location?.pathname?l("kundali_prediction"):i?.GENERAL_PREDICTION===location?.pathname?l("genral_prediction"):l("prediction")}),O?a.jsx("div",{className:"col-span-full flex justify-center items-center h-full mt-5",children:a.jsx(_e,{})}):a.jsxs(a.Fragment,{children:[a.jsx("section",{className:"container mx-auto px-4 paddingTop100",children:w?.contentList?.length>0&&a.jsx("div",{ref:q,className:"keen-slider py-0 flex ",children:w.contentList.map((e,t)=>{const n=L===e.value;return a.jsx("div",{className:"keen-slider__slide !w-auto box_shadow_common new_border rounded-[10px]",children:a.jsxs("div",{onClick:()=>{K(t),E(e.value),F(e.value,e?.subcategories?.[0]?.value),y(e?.subcategories),g(e?.subcategories?.[0]?.value)},className:`w-full h-full rounded-[10px] flex flex-col items-center cursor-pointer p-[15px] sm:p-[25px] gap-[15px] text-center transition-all duration-300 box_shadow_common
                ${n?"gradient-background text-white":"bg-white new_body_font"}`,children:[a.jsx("div",{className:"w-[60px] h-[60px] md:w-[80px] md:h-[80px] flex items-center justify-center commonLightBack rounded-full",children:a.jsx("img",{src:e?.image,alt:e.category,className:"object-contain w-full h-full"})}),a.jsx("div",{className:"text-[16px] sm:text-[18px] font-semibold capitalize",children:e?.category})]})},t)})})}),a.jsx("section",{className:"container mx-auto px-4 paddingTop50 overflow-hidden",children:a.jsx("div",{ref:B,className:"keen-slider px-0",children:h.map((e,t)=>{const n=H===e?.value,S=t===0?"rounded-l-[10px]":t===h.length-1?"rounded-r-[10px]":"rounded-none";return a.jsx("div",{className:"keen-slider__slide !w-auto ",children:a.jsx("button",{onClick:()=>{g(e?.value),F(L,e?.value)},className:`w-full min-w-max whitespace-nowrap px-[15px] py-[10px] md:px-[20px] md:py-[27px] text-[14px] md:text-[16px] font-medium transition-all duration-200 new_border box_shadow_common cursor-pointer
            ${n?"gradient-background text-white":"bg-white website_new_color"}
            ${S}`,children:e?.name||e})},e?._id)})})}),D?.is_loading&&D?.loding_type==="predictionPage"?a.jsx("div",{className:"",children:a.jsx("div",{className:"pb-10 pt-24 min-h-[100vh]",children:a.jsx(ce,{})})}):a.jsx(a.Fragment,{children:a.jsx("section",{className:"mx-auto  flex flex-col gap-[50px] padding50 container",children:R?.length>0&&R?.map((e,t)=>a.jsx("div",{className:"flex flex-col gap-[20px] bg-white rounded-[10px] p-[15px] md:p-[30px] new_border",children:a.jsx("p",{className:"commonQuesP ",children:J(e?.value)})},t))})})]}),a.jsx(re,{isOpen:O,title:l("title_model"),description:l("complate_profile_desc"),okText:l("go_to_profile_page"),cancelText:l("cancel"),onConfirm:()=>{j(i?.PROFILE_SETTING)},onCancel:()=>{j(i?.HOMEPAGE),k(!1)}})]})};export{Le as default};
