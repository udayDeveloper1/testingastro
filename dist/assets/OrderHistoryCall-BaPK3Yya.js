const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CustomButton-DXO1S32O.js","./vendor-Z3tYsDUR.js","./vendor-BI8wlGUX.css"])))=>i.map(i=>d[i]);
import{U,ak as P,al as R,A as u,aj as p,am as T,n as O,an as k,ao as F,ap as I,aq as B,ar as M,as as H,_ as Q}from"./index-CA7lLIcV.js";import{j as e,v as C,a5 as q,r as c,m as G,o as W,n as j,g as $}from"./vendor-Z3tYsDUR.js";import z from"./CommonBanner-DOXs5XQw.js";import V from"./Loader-DZo0XRrG.js";import Y from"./CustomWhiteButton-DxPqXzdC.js";import{l as Z,a as J,b as K,c as X}from"./loader4-dvcpAguw.js";import{N as ee}from"./NoDataFound-DdJnJfzR.js";import"./No_Data_Found-BlLxs6qj.js";const se=({classList:a=""})=>e.jsx("div",{className:`loader3-container ${a}`,children:e.jsxs("div",{className:"loader text-center",children:[e.jsx("div",{className:"loader1 absolute",children:e.jsx("img",{src:Z,alt:"loader1"})}),e.jsx("div",{className:"loader2 absolute",children:e.jsx("img",{src:J,alt:"loader2"})}),e.jsx("div",{className:"loader3 absolute",children:e.jsx("img",{src:K,alt:"loader3"})}),e.jsx("div",{className:"loader4 absolute",children:e.jsx("img",{src:X,alt:"loader4"})})]})}),ae="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.83555%2010.4505C6.96733%2012.5823%2010.3782%2012.5823%2012.51%2010.4505M13.6202%2013.6839C13.6202%2013.6839%2013.6858%2013.637%2013.7907%2013.5568C15.3623%2012.3417%2016.3488%2010.5809%2016.3488%208.62047C16.3488%204.96574%2012.9124%202%208.67442%202C4.43644%202%201%204.96574%201%208.62047C1%2012.2769%204.43644%2015.1403%208.67442%2015.1403C9.03597%2015.1403%209.62946%2015.1164%2010.4549%2015.0687C11.531%2015.7679%2013.1017%2016.3418%2014.4763%2016.3418C14.9018%2016.3418%2015.1022%2015.9922%2014.8293%2015.6357C14.4149%2015.1275%2013.8436%2014.3132%2013.6219%2013.683L13.6202%2013.6839Z'%20stroke='url(%23paint0_linear_5315_48725)'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5315_48725'%20x1='1'%20y1='9.17089'%20x2='16.3488'%20y2='9.17089'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23C32853'/%3e%3cstop%20offset='1'%20stop-color='%23EE7E49'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e";function v({astro:a,historyType:h,handleChat:l=()=>{}}){const{t:d}=C();return e.jsxs("div",{className:"w-full  bg-white  rounded-[10px] overflow-hidden AstroChatCard flex flex-col justify-between ",children:[e.jsxs("div",{className:"commonLightBack p-4 flex items-center gap-4",children:[a.receiver_profile?e.jsx("img",{src:a.receiver_profile,alt:a.name,className:"w-16 h-16 rounded-full object-cover shadow-[0px_0px_14px_0px_#00000040]"}):e.jsx("div",{className:"w-16 h-16 rounded-full  relative",children:e.jsx(se,{classList:"shadow-[0px_0px_14px_0px_#00000040]"})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx("p",{className:"font-semibold text-[18px] mb-0",children:a.receiver_name}),e.jsx("div",{className:"flex items-center text-yellow-500 text-xs ",children:[...Array(5)].map((i,n)=>e.jsx(q,{className:"text-yellow-400 text-xs"},n))}),e.jsxs("p",{className:"website_color text-[16px] font-semibold mb-0",children:["₹ ",a?.receiver_price_per_min,"/min"]})]})]}),e.jsxs("div",{className:"p-4  space-y-1 flex flex-col gap-3",children:[e.jsxs("p",{className:"commonQuesP !font-medium ",children:["Order Id: ",e.jsx("span",{className:"font-[400]",children:a?.random_id})]}),e.jsx("p",{className:"commonQuesP !font-medium ",children:a?.dateTime}),e.jsxs("p",{className:"commonQuesP !font-medium ",children:["Rate: ₹  ",e.jsxs("span",{className:"font-[400]",children:[a?.receiver_price_per_min,"/min"]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"flex gap-2 mb-3",children:h==="Chat"&&e.jsxs(Y,{className:" w-full  border  rounded-md text-[14px] font-semibold px-5 py-2",onClick:i=>l(i,a),children:[e.jsx("img",{src:ae,alt:""}),d("chat")]})})})]})}c.lazy(()=>Q(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([0,1,2]),import.meta.url));function pe(){const[a,h]=c.useState("1"),[l,d]=c.useState([]),i=G(),n=W(),{t:N}=C(),y=U(),{is_login:w,loginUserData:g}=j(s=>s?.masterSlice?.loginUser),{loding_type:te,is_loading:re}=j(s=>s?.masterSlice?.loader),[_,m]=c.useState(!0),b=async()=>{m(!0);try{const s=await P();s?.code===1&&d(s?.data)}catch(s){console.log(s)}finally{m(!1)}m(!1)},D=async(s,r)=>{s.preventDefault();try{const t={...$.cloneDeep(r),sessionID:`sessionID_${Date.now()}`};t.price_per_min=t?.receiver_price_per_min,t.profile_image=t?.receiver_profile,t.name=t?.receiver_name;const o=await R();if(o.code!==u.SUCCESS)return p(o.message);const f={...g,...o?.data};T(i,w,g,O,o?.data),k(f);const A=r?.is_ai_chat=="1",E=o?.data?.is_freechat_count>0,S=+f?.total_wallet_balance,L=+t.receiver_price_per_min;if(!A){const x=await F({astrologer_id:r?.receiver_id,conversation_types:"chat"});if(x.code!==u.SUCCESS)return p(x.message);t.AstroData=x.data}E||S/L>=2?I(n,i,B,M,t,"history",!0):(i(H(t)),n(y.MONEY_WALLET))}catch(t){p(t.message)}};return c.useLayoutEffect(()=>{b()},[]),e.jsxs(e.Fragment,{children:[e.jsx("section",{children:e.jsx("div",{className:"",children:e.jsx(z,{text:N("order_history")})})}),e.jsx("section",{children:e.jsxs("div",{className:"container padding50 ",children:[a==="0"?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map((s,r)=>e.jsx(v,{astro:s,historyType:"Call"},r))})}):a==="1"?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map((s,r)=>e.jsx(v,{astro:s,historyType:"Chat",handleChat:t=>D(t,s)},r))})}):e.jsx(e.Fragment,{}),_&&e.jsx(V,{}),!_&&l?.length===0&&e.jsx(e.Fragment,{children:e.jsx(ee,{classList:"pt-10"})})]})})]})}export{pe as default};
