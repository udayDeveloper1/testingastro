const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CustomButton-DXO1S32O.js","./vendor-Z3tYsDUR.js","./vendor-BI8wlGUX.css"])))=>i.map(i=>d[i]);
import{_ as O,aw as K,ax as p,ay as t,x as L,v as f,aj as _,az as W,A as C,aA as B,aB as M,ai as N,aC as q,aD as $,al as Q,n as X,C as I}from"./index-CA7lLIcV.js";import{r as i,m as ee,n as T,v as H,Z as c,j as a,a6 as te,_ as y,a7 as P,a8 as ae,a9 as se,$ as oe,h as re,f as le}from"./vendor-Z3tYsDUR.js";import ie from"./CommonBanner-DOXs5XQw.js";import"./CustomTable-_uj6QeTs.js";import"./Rudraksha-CJwv-keT.js";import ne from"./CustomWhiteButton-DxPqXzdC.js";import"./ConfirmModal-CWGZRiNR.js";import v from"./Loader-DZo0XRrG.js";import"./loader4-dvcpAguw.js";i.lazy(()=>O(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([0,1,2]),import.meta.url));const ce="data:image/svg+xml,%3csvg%20width='72'%20height='72'%20viewBox='0%200%2072%2072'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='36'%20cy='36'%20r='36'%20fill='white'/%3e%3ccircle%20cx='36'%20cy='36'%20r='27.6279'%20fill='url(%23paint0_linear_5315_49054)'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M60.2731%2011.7279C46.8673%20-1.67687%2025.1322%20-1.67687%2011.7286%2011.7279C-1.67712%2025.1326%20-1.67712%2046.8661%2011.7286%2060.2716C25.1344%2073.6771%2046.8695%2073.6764%2060.2731%2060.2716C73.6766%2046.8669%2073.6759%2025.1334%2060.2731%2011.7279ZM42.8816%2019.8586C46.6837%2023.6575%2046.6837%2029.8199%2042.8816%2033.622C36.7646%2039.7386%2026.2698%2035.381%2026.2698%2026.7404C26.267%2018.0971%2036.7673%2013.7446%2042.8816%2019.8586ZM28.8392%2037.0456C33.1369%2040.0366%2038.8644%2040.0366%2043.1618%2037.0456C48.6858%2039.349%2052.8056%2044.2165%2054.1383%2050.0697H17.8627C19.195%2044.2138%2023.3151%2039.3522%2028.8392%2037.0456ZM45.4488%2034.9972C51.775%2038.1142%2056.2507%2044.2134%2057.213%2051.2901C57.3276%2052.1267%2056.6658%2052.8831%2055.8206%2052.8831V52.8859H16.1813C15.316%2052.8859%2014.6341%2052.1296%2014.806%2051.1756C15.9607%2044.0219%2020.1266%2038.1661%2026.5534%2034.997C19.4822%2026.9147%2025.2383%2014.192%2035.9998%2014.192C46.7614%2014.192%2052.5173%2026.9156%2045.4488%2034.9972Z'%20fill='url(%23paint1_linear_5315_49054)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5315_49054'%20x1='8.37207'%20y1='36'%20x2='63.6279'%20y2='36'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23C32853'/%3e%3cstop%20offset='1'%20stop-color='%23EE7E49'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5315_49054'%20x1='70.3255'%20y1='35.9999'%20x2='1.67432'%20y2='35.9999'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23FDF3EC'/%3e%3cstop%20offset='1'%20stop-color='%23F9E9EC'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",de="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.11763%203.82359H2.41176C2.03733%203.82359%201.67825%203.97233%201.41349%204.23708C1.14874%204.50184%201%204.86092%201%205.23534V11.5882C1%2011.9627%201.14874%2012.3218%201.41349%2012.5865C1.67825%2012.8513%202.03733%2013%202.41176%2013H8.76466C9.13908%2013%209.49816%2012.8513%209.76292%2012.5865C10.0277%2012.3218%2010.1764%2011.9627%2010.1764%2011.5882V10.8824M9.47053%202.41183L11.5882%204.52946M12.5658%203.53065C12.8438%203.25264%2013%202.87558%2013%202.48242C13%202.08926%2012.8438%201.7122%2012.5658%201.43419C12.2878%201.15618%2011.9107%201%2011.5176%201C11.1244%201%2010.7474%201.15618%2010.4694%201.43419L4.52939%207.35298V9.47061H6.64702L12.5658%203.53065Z'%20stroke='white'%20stroke-width='1.2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",me=i.lazy(()=>O(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([0,1,2]),import.meta.url)),pe=()=>{const d=ee(),n=T(e=>e?.masterSlice?.loginUser),{loding_type:b}=T(e=>e?.masterSlice?.loader),S=T(e=>e?.masterSlice?.loader),{t:s}=H(),[x]=c.useForm(),[j,D]=i.useState(ce),[R,G]=i.useState(null),[w,g]=i.useState([]),[l,A]=i.useState({}),h=i.useRef(null),E=i.useRef(!1),Y=i.useMemo(()=>K(E,s,l),[s,l]),V=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],U=async e=>{try{const o=await $(e);if(o?.code===C?.SUCCESS)try{const r=await Q({id:n?.loginUserData?._id});if(r?.code===C?.SUCCESS){if(d(X({is_login:!0,loginUserData:r?.data})),r.code===1){let u=localStorage.getItem(I.AUTH_KEY)?JSON.parse(localStorage.getItem(I.AUTH_KEY)):{};if(Object.keys(u)?.length>0){let m=r?.data;const J={...u,...m};localStorage.setItem(I.AUTH_KEY,JSON.stringify(J)),F()}}N(o?.message)}}catch(r){console.error("Error in getUserDetails:",r)}else _(o?.message)}catch(o){console.error("Error in editProfile:",o)}finally{f(d)}},k=async e=>{if(R!==null)try{L(d,"profile_form");let o=new FormData;o.append("image",R);let r=await W(o,"Profileimage");if(r.code===C.SUCCESS){let u={name:e?.[t?.FIRSTNAME]||"  ",gender:e?.[t?.GENDER],time_of_birth:M(e?.[t?.TOB]),place_of_birth:e?.[t?.PLACE_OF_BIRTH],curr_address:e?.[t?.ADDRESS],city:e?.[t?.CITY],pincode:e?.[t?.PINCODE],email:e?.[t?.EMAIL],dob:B(e?.[t?.DOB]),profile_image:r.data.file_name,latitude:l?.coordinates[0]?l?.coordinates[0]:n?.loginUserData?.latitude,longitude:l?.coordinates[1]?l?.coordinates[1]:n?.loginUserData?.longitude,tz:l?.tz?l?.tz:n?.loginUserData?.longitude},m=U(u);m.code===C.SUCCESS?(f(d),N(m.message)):(f(d),_(m.message))}else _(r.message),f(d)}catch(o){f(d),_(o.message)}else{let o={name:e?.[t?.FIRSTNAME],gender:e?.[t?.GENDER],time_of_birth:e?.[t?.TOB]?M(e?.[t?.TOB]):"",place_of_birth:e?.[t?.PLACE_OF_BIRTH],curr_address:e?.[t?.ADDRESS],city:e?.[t?.CITY],pincode:e?.[t?.PINCODE],email:e?.[t?.EMAIL],dob:B(e?.[t?.DOB]),latitude:l?.coordinates?.[0]!=null?l.coordinates[0]:n?.loginUserData?.latitude,longitude:l?.coordinates?.[1]!=null?l.coordinates[1]:n?.loginUserData?.longitude,tz:l?.tz?l?.tz:n?.loginUserData?.longitude},r=U(o);r.code===C.SUCCESS?N(r.message):_(r.message)}},z=({file:e})=>{if(e){if(!V.includes(e?.type)){_("Only PNG, JPG, JPEG, GIF, or WEBP images are allowed.");return}const o=URL.createObjectURL(e);D(o),G(e)}},Z=e=>{E.current=!1,h.current&&clearTimeout(h.current),h.current=setTimeout(async()=>{if(e.trim().length<3){g([]);return}try{const r=await q({city:e});if(r?.code===1&&Array.isArray(r?.data?.response)){const u=r.data.response.map(m=>({...m,value:m.full_name}));g(u)}else g([])}catch(o){console.error("Geo search failed",o),g([])}},500)},F=async()=>{if(L(d,"userProfileLoader"),n?.is_login===!0){let e=n?.loginUserData;x.setFieldsValue({[t?.FIRSTNAME]:e?.name,[t?.GENDER]:e?.gender,[t?.DOB]:e?.dob?le(e?.dob):null,[t?.TOB]:e?.time_of_birth?re(e?.time_of_birth,"HH:mm"):null,[t?.PLACE_OF_BIRTH]:e?.place_of_birth||"",[t?.ADDRESS]:e?.curr_address,[t?.CITY]:e?.city,[t?.PINCODE]:e?.pincode,[t?.EMAIL]:e?.email}),A({PLACE_OF_BIRTH:e?.place_of_birth}),e?.profile_image&&(e?.profile_image.startsWith("http")?D(e?.profile_image):D(e?.profile_image_url))}f(d)};return i.useEffect(()=>{F()},[n]),i.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]),a.jsxs(a.Fragment,{children:[S?.is_loading&&S?.loding_type==="profile_form"&&a.jsx(v,{}),a.jsxs("div",{className:"mx-auto md:p-20 bg-white rounded-2xl ProfileCard ProfileCard_input",children:[b==="userProfileLoader"&&a.jsx(v,{}),a.jsx("div",{className:" border-opacity-30 rounded-[10px]  p-7 flex flex-col justify-between sm:flex-row items-center gap-5 sm:gap-10 mb-6 border border-[#f9eaec] [border-image-slice:1] [background:linear-gradient(270deg,_#FDF3EC_0%,_#F9E9EC_100%)]",children:a.jsxs("div",{className:" flex flex-col sm:flex-row items-center gap-5 sm:gap-[30px] ",children:[a.jsxs("div",{className:"relative w-21 h-21 rounded-full  [box-shadow:0px_0px_14px_0px_#00000040]",children:[j?a.jsx("img",{src:j,alt:"Profile",className:"w-full h-full object-cover rounded-full "}):a.jsx("img",{src:j,alt:"Profile",className:"w-full h-full object-cover rounded-full "}),a.jsxs("div",{className:"w-[30px] h-[30px] absolute -bottom-[9px] -right-[9px] rounded-full cursor-pointer [background:linear-gradient(90deg,_#C32853_0%,_#EE7E49_100%)] flex items-center justify-center",children:[a.jsx("img",{src:de,alt:"edit-icon",width:12,height:12,loading:"lazy",decoding:"async"}),a.jsx(te,{showUploadList:!1,beforeUpload:()=>!1,onChange:z,maxCount:1,className:"change_photo opacity-0 w-[30px] h-[30px] min-w-[30px] min-h-[30px] overflow-hidden absolute top-0 left-0 rounded-full",children:a.jsx(ne,{type:"link",className:"border py-2 px-4 text-[14px] font-semibold",children:s("CHANGE_PHOTO")})})]})]}),a.jsx("div",{className:"text-center sm:text-left ",children:a.jsx("p",{className:"text-[16px] font-semibold new_body_font mb-0",children:n?.loginUserData?.country_code+" "+n?.loginUserData?.mobile_number})})]})}),a.jsxs(c,{form:x,layout:"vertical",onFinish:k,className:"customForm profileForm",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4",children:[a.jsx(c.Item,{label:s("name"),name:t?.FIRSTNAME,rules:p[t?.FIRSTNAME],className:"col-span-1 ",children:a.jsx(y,{placeholder:s("enter_name"),className:"px-6 py-4 font-medium text-[16px]  rounded-[10px] new_body_font"})}),a.jsx(c.Item,{name:t?.GENDER,label:s("gender"),rules:p[t?.GENDER],className:"col-span-1 ",children:a.jsxs(P.Group,{children:[a.jsx(P,{value:"male",children:s("male")}),a.jsx(P,{value:"female",children:s("female")})]})}),a.jsxs("div",{className:"flex col-span-1 justify-between",children:[a.jsx(c.Item,{label:s("date_of_birth"),name:t?.DOB,rules:p[t?.DOB],className:"w-[49%]",children:a.jsx(ae,{format:"DD MMMM YYYY",className:"w-full px-6 py-4 font-medium text-[16px]  rounded-[10px] new_body_font"})}),a.jsx(c.Item,{label:s("time_of_birth"),name:t?.TOB,rules:p[t?.TOB],className:"w-[49%]",children:a.jsx(se,{format:"hh:mm A",use12Hours:!0,className:"w-full px-6 py-4 font-medium text-[16px]  rounded-[10px] new_body_font",minuteStep:1,allowClear:!0})})]}),a.jsx(c.Item,{label:s("place_of_birth"),name:t?.PLACE_OF_BIRTH,rules:Y,className:"nav",children:a.jsx(oe,{options:w,onSearch:Z,value:x.getFieldValue(t?.PLACE_OF_BIRTH),open:!E.current&&w.length>0,onSelect:e=>{x.setFieldsValue({[t?.PLACE_OF_BIRTH]:e}),A(w.find(o=>o.full_name===e)),E.current=!0,g([])},onChange:e=>{x.setFieldsValue({[t?.PLACE_OF_BIRTH]:e}),E.current=!1},placeholder:s("enter_place_of_birth"),className:"w-full px-6 py-4 font-medium text-[16px] placeOfBirth  rounded-[10px] new_body_font"})}),a.jsx(c.Item,{label:s("email"),name:t?.EMAIL,rules:p[t?.EMAIL],className:"col-span-1",children:a.jsx(y,{placeholder:s("enter_email"),className:"px-6 py-4 font-medium text-[16px]  rounded-[10px] new_body_font"})}),a.jsx(c.Item,{label:s("current_address"),name:t?.ADDRESS,rules:p[t?.ADDRESS],className:"col-span-1",children:a.jsx(y,{placeholder:s("enter_location"),className:"px-6 py-4 font-medium text-[16px]  rounded-[10px] new_body_font"})}),a.jsx(c.Item,{label:s("city"),name:t?.CITY,rules:p[t?.CITY],className:"col-span-1 ",children:a.jsx(y,{placeholder:s("enter_city"),className:"px-6 py-4 font-medium text-[16px] rounded-[10px] "})}),a.jsx(c.Item,{label:s("pincode"),name:t?.PINCODE,rules:p[t?.PINCODE],className:"col-span-1",children:a.jsx(y,{placeholder:s("enter_pincode"),className:"px-6 py-4 font-medium text-[16px] rounded-[10px]"})})]}),a.jsx("div",{className:"text-center mt-8 w-full flex justify-center",children:a.jsx(me,{type:"primary",htmltype:"submit",className:"bg-[#7B61FF] px-13 py-3 rounded-md text-[16px] font-semibold",children:b==="userProfileLoader"?`${s("UPDATING")}...`:s("UPDATE_PROFILE")})})]})]})]})};i.lazy(()=>O(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([0,1,2]),import.meta.url));function be(){const[d,n]=i.useState("0"),[b,S]=i.useState("1"),{t:s}=H();return a.jsxs(a.Fragment,{children:[a.jsx("section",{children:a.jsx(ie,{text:"",highlight:s("Edit_Your_Profile")})}),a.jsx("section",{children:a.jsx("div",{className:"container padding50 ",children:a.jsx(pe,{})})})]})}export{be as default};
