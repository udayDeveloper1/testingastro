const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CustomButton-DXO1S32O.js","./vendor-Z3tYsDUR.js","./vendor-BI8wlGUX.css"])))=>i.map(i=>d[i]);
import{U as be,C as g,L as J,aw as je,ay as s,aJ as _,y as S,o as Re,aK as we,aF as Z,aL as De,A as N,x as W,Y as A,aM as Le,w as F,aj as C,aN as ye,v as Te,z as Q,ai as X,aC as Ue,_ as Ye,aO as He}from"./index-CA7lLIcV.js";import{r as i,k as Ke,Z as h,v as ke,m as Fe,n as R,o as ze,h as a,j as t,G as ee,_ as z,a7 as $,ai as x,$ as $e,aj as se,ak as Ge}from"./vendor-Z3tYsDUR.js";import{c as Pe}from"./search-DsneqEti.js";import{D as ve,c as Ve,i as qe}from"./kundalicheckLoginImage-CkIC4tNs.js";import{u as Be}from"./useDebounce-DVTU10R3.js";import{k as G}from"./NavigationPage-BHG-iaEe.js";import Je from"./ConfirmModal-CWGZRiNR.js";import Ze from"./PhoneAuthModals-DlQea5gi.js";import We from"./Loader-DZo0XRrG.js";const Qe="data:image/svg+xml,%3csvg%20width='30'%20height='30'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='15'%20cy='15'%20r='15'%20fill='url(%23paint0_linear_5322_51515)'/%3e%3cpath%20d='M11.25%2011.25H10.5C10.1022%2011.25%209.72064%2011.408%209.43934%2011.6893C9.15804%2011.9706%209%2012.3522%209%2012.75V19.5C9%2019.8978%209.15804%2020.2794%209.43934%2020.5607C9.72064%2020.842%2010.1022%2021%2010.5%2021H17.25C17.6478%2021%2018.0294%2020.842%2018.3107%2020.5607C18.592%2020.2794%2018.75%2019.8978%2018.75%2019.5V18.75M18%209.75L20.25%2012M21.2888%2010.9388C21.5841%2010.6434%2021.7501%2010.2428%2021.7501%209.82508C21.7501%209.40734%2021.5841%209.00672%2021.2888%208.71133C20.9934%208.41595%2020.5927%208.25%2020.175%208.25C19.7573%208.25%2019.3566%208.41595%2019.0613%208.71133L12.75%2015.0001V17.2501H15L21.2888%2010.9388Z'%20stroke='url(%23paint1_linear_5322_51515)'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5322_51515'%20x1='30'%20y1='15'%20x2='0'%20y2='15'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23FDF3EC'/%3e%3cstop%20offset='1'%20stop-color='%23F9E9EC'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5322_51515'%20x1='9'%20y1='14.625'%20x2='21.7501'%20y2='14.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23C32853'/%3e%3cstop%20offset='1'%20stop-color='%23EE7E49'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",te=i.lazy(()=>Ye(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([0,1,2]),import.meta.url)),{Option:I}=x,ws=()=>{const ae=i.useRef(null),E=t.jsx("img",{src:qe,alt:"dropdown",style:{width:16,height:16}}),ne=Ke(),m=be(),u=ne?.pathname,[f]=h.useForm(),{t:o,i18n:P}=ke(),p=Fe(),[v,oe]=i.useState({}),[Xe,le]=i.useState(!1),O=R(e=>e?.masterSlice?.modal),V=R(e=>e?.masterSlice?.loader),w=R(e=>e?.masterSlice?.loginUser),re=localStorage.getItem(g?.LOGIN_KEY);localStorage?.getItem(g?.LANGUAGE_KEY)?localStorage?.getItem(g?.LANGUAGE_KEY):J?.ENGLISH;const ie=R(e=>e?.masterSlice?.currentLanguage),[D,b]=i.useState([]),[c,L]=i.useState({}),y=i.useRef(null),M=i.useRef(!1),[es,ce]=i.useState(0),[T,q]=i.useState(!1),U=ze(),B=a().year(),me=a().month()+1,de=(e,n)=>Array.from({length:a(`${n}-${e}`,"YYYY-MM").daysInMonth()},(r,l)=>String(l+1).padStart(2,"0")),he=Array.from({length:12},(e,n)=>a().month(n).format("MMM")),ue=Array.from({length:100},(e,n)=>B-n),fe=Array.from({length:24},(e,n)=>a({hour:n}).format("HH")),pe=Array.from({length:60},(e,n)=>a({minute:n}).format("mm")),_e=Array.from({length:60},(e,n)=>a({second:n}).format("ss")),Y=async e=>{console.log("data kundliDetailsApiCalling",e),W(p,"freeKundli_form"),e?.date,S(e?.time,A?.TIME_24_HOUR_FORMAT),e?.tz,e?.lat,e?.lon,e?.lang;let n={date:e?.date,time:S(e?.time,A?.TIME_24_HOUR_FORMAT),lat:e?.lat,lon:e?.lon,tz:e?.tz,lang:e?.lang,bop:e?.bop,gender:e?.gender||"123",u_name:e?.u_name||"123",tzon:e?.tzone};const r={};try{const[l,d,j,ss,ts,as,ns,os,ls,rs,is,cs,ms,ds,hs,us,fs,ps,_s,gs,Ns,xs,Es]=await Promise.all([Q(n)]);return l?.code===N?.SUCCESS?r.panchangeDetails=l?.data:r.panchangeDetails={},r}catch(l){return console.error("Error fetching kundli details:",l),r}},ge=async e=>{W(p,"freeKundli_form");let n={[e?.gender]:{name:e[s?.NAME],dob:`${e[s?.DAY]}/${a(e[s?.MONTH],"MMM").format("MM")}/${e[s?.YEAR]}`,time_of_birth:S(`${e?.[s?.HOURS]}:${e?.[s?.MINUTE]}:${e?.[s?.SECOND]}`,A?.TIME_WITH_SECONDS_24_HOUR_FORMAT),place_of_birth:e[s?.LOCATION],details:{year:e[s?.YEAR],month:a().month(e[s?.MONTH]).format("MM"),date:e[s?.DAY],hours:e[s?.HOURS],minutes:e[s?.MINUTE],seconds:e[s?.SECOND],latitude:c?.coordinates[0],longitude:c?.coordinates[1],timezone:c?.tz,tzone:c?.tzone[0]}}},r={date:`${e[s?.DAY]}/${a(e[s?.MONTH],"MMM").format("MM")}/${e[s?.YEAR]}`,time:`${e[s?.HOURS]}:${e[s?.MINUTE]}`,tz:c?.tz,lat:c?.coordinates[0],lon:c?.coordinates[1],tzone:c?.tzone[0],bop:e[s?.LOCATION],gender:e[s?.GENDER],u_name:e[s?.NAME],lang:ie||J?.ENGLISH};console.log("requestrequest",r);try{if(w?.is_login)if(T){let l={kundli_id:e?.[s?.ID],name:e[s?.NAME],dob:`${e[s?.DAY]}/${a(e[s?.MONTH],"MMM").format("MM")}/${e[s?.YEAR]}`,gender:e[s?.GENDER],time_of_birth:S(`${e?.[s?.HOURS]}:${e?.[s?.MINUTE]}:${e?.[s?.SECOND]}`,A?.TIME_WITH_SECONDS_24_HOUR_FORMAT),place_of_birth:e[s?.LOCATION],year:e[s?.YEAR],month:a().month(e[s?.MONTH]).format("MM"),date:e[s?.DAY],hours:e[s?.HOURS],minutes:e[s?.MINUTE],seconds:e[s?.SECOND],latitude:c?.coordinates[0],longitude:c?.coordinates[1],tzone:c?.tz,timezone:c?.tz};const d=await Le(l);if(d?.code===N?.SUCCESS){const j=await Y(r);localStorage.setItem(g?.KUNDLI_KEY,JSON.stringify(j)),p(F(j)),G(U,"basic",j,m.FREEKUNDALI_DETAILS)}else C(d?.message)}else{const l=await ye(n);if(l?.code===N?.SUCCESS){const d=await Y(r);localStorage.setItem(g?.KUNDLI_KEY,JSON.stringify(d)),p(F(d)),G(U,"basic",d,m.FREEKUNDALI_DETAILS)}else C(l?.message),Te(p)}else{const l=await Q(r);if(l?.code===N?.SUCCESS){X(l?.message);const d=await Y(r);localStorage.setItem(g?.KUNDLI_KEY,JSON.stringify(d)),p(F(d)),G(U,"basic",d,m.FREEKUNDALI_DETAILS)}else C(l?.message)}}catch(l){console.error(l),C("Something went wrong!")}finally{}};i.useEffect(()=>{const e=()=>{ce(n=>n+1)};return P.on("languageChanged",e),()=>{P.off("languageChanged",e)}},[]);const Ne=(e,n)=>{_[e]?.find(l=>l.pattern);const r=n.replace(/[^A-Za-z\s]/g,"");f.setFieldsValue({[e]:r})},xe=e=>{M.current=!1,y.current&&clearTimeout(y.current),y.current=setTimeout(async()=>{if(e.trim().length<3){b([]);return}try{const r=await Ue({city:e});if(r?.code===1&&Array.isArray(r?.data?.response)){const l=r.data.response.map(d=>({...d,value:d.full_name}));b(l)}else b([])}catch(n){console.error("Geo search failed",n),b([])}},500)},Ee=i.useMemo(()=>je(M,o,c),[o,c]);i.useEffect(()=>{f.setFieldsValue({[s?.GENDER]:"male",[s?.DAY]:a().format("DD"),[s?.MONTH]:a().format("MMM"),[s?.YEAR]:a().format("YYYY"),[s?.HOURS]:a().format("HH"),[s?.MINUTE]:a().format("mm"),[s?.SECOND]:a().format("ss"),[s?.LOCATION]:""})},[f]);const Ie=e=>{console.log("handleListItemClick Data",{name:e?.place_of_birth,alternate_name:e?.place_of_birth,country:"",country_name:"",full_name:e?.place_of_birth,coordinates:[e?.latitude,e?.longitude],tz:e?.timezone,tz_dst:e?.timezone,current_dst:!1,tzone:["Asia/Kolkata"],value:e?.place_of_birth});let n={[s?.ID]:e?._id,[s?.NAME]:e?.name,[s?.DAY]:a(e?.date,"D").format("DD"),[s?.MONTH]:a().month(e?.month-1).format("MMM"),[s?.YEAR]:a(e?.year,"YYYY").format("YYYY"),[s?.HOURS]:a(e?.hours,"H").format("HH"),[s?.MINUTE]:a(e?.minutes,"m").format("mm"),[s?.SECOND]:a(e?.seconds,"s").format("ss"),[s?.LOCATION]:e?.place_of_birth,[s?.GENDER]:e?.gender};console.log("handleListItemClick req",n),f?.setFieldsValue({[s?.ID]:e?._id,[s?.NAME]:e?.name,[s?.DAY]:a(e?.date,"D").format("DD"),[s?.MONTH]:a().month(e?.month-1).format("MMM"),[s?.YEAR]:a(e?.year,"YYYY").format("YYYY"),[s?.HOURS]:a(e?.hours,"H").format("HH"),[s?.MINUTE]:a(e?.minutes,"m").format("mm"),[s?.SECOND]:a(e?.seconds,"s").format("ss"),[s?.LOCATION]:e?.place_of_birth,[s?.GENDER]:e?.gender}),console.log("selecteLocation",c),L({name:e?.place_of_birth,alternate_name:e?.place_of_birth,country:"",country_name:"",full_name:e?.place_of_birth,coordinates:[e?.latitude,e?.longitude],tz:e?.timezone,tz_dst:e?.timezone,current_dst:!1,tzone:["Asia/Kolkata"],value:e?.place_of_birth}),q(!0)},Me=e=>{f?.setFieldsValue({[s?.ID]:e?._id,[s?.NAME]:e?.name,[s?.DAY]:a(e?.date,"D").format("DD"),[s?.MONTH]:a().month(e?.month-1).format("MMM"),[s?.YEAR]:a(e?.year,"YYYY").format("YYYY"),[s?.HOURS]:a(e?.hours,"H").format("HH"),[s?.MINUTE]:a(e?.minutes,"m").format("mm"),[s?.SECOND]:a(e?.seconds,"s").format("ss"),[s?.LOCATION]:e?.place_of_birth,[s?.GENDER]:e?.gender}),L({name:e?.place_of_birth,alternate_name:e?.place_of_birth,country:"",country_name:"",full_name:e?.place_of_birth,coordinates:[e?.latitude,e?.longitude],tz:e?.timezone,tz_dst:e?.timezone,current_dst:!1,tzone:["Asia/Kolkata"],value:e?.place_of_birth}),q(!0),f?.submit()},[H,K]=i.useState(null),[k,Se]=i.useState(""),Ae=Be(k,g?.SEARCH_DELAY),Ce=async(e=1)=>{const n=await De({page:e,search:k,per_page:1e3});n?.code===N?.SUCCESS?K(n?.data):n?.code===N?.NO_DATA_FOUND&&K([])};i.useEffect(()=>{w?.is_login&&Ce()},[w?.is_login,Ae]);const Oe=()=>{He({kundli_id:v?._id}).then(e=>{if(e?.code===N?.SUCCESS){const n=H?.KundliMatchList?.filter(r=>r?._id!==v?._id);K({...H,KundliMatchList:n}),Z(p),X(e?.message)}else C(e?.message)})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:`grid grid-cols-1 ${u==m?.FREEKUNDALI?"lg:grid-cols-3":""} gap-y-4 lg:gap-4 w-full`,ref:ae,children:[t.jsxs(ee,{className:"w-full col-span-3 lg:col-span-2 relative freeKundaliCardNew h-full ",children:[V?.is_loading&&V?.loding_type==="freeKundli_form"&&t.jsx(We,{}),t.jsxs(h,{form:f,layout:"vertical",onFinish:ge,className:"customForm flex flex-col gap-4 justify-between h-full",children:[u==m?.FREEKUNDALI&&t.jsx("h2",{className:"customFormH2 text-start",children:o(T?"edit_title":"title")}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx(h.Item,{name:s.ID,hidden:!0,children:t.jsx(z,{})}),t.jsx(h.Item,{name:s.NAME,label:o("name"),rules:_[s.NAME],className:"w-full md:w-1/2 mb-0",children:t.jsx(z,{placeholder:o("enter_name"),className:`${u==m?.FREEKUNDALI?"antDInput":"antDNewInput"}`,onChange:e=>Ne(s.NAME,e.target.value)})}),t.jsx(h.Item,{name:s.GENDER,label:o("gender"),rules:_[s.GENDER],className:"w-full md:w-1/2 mb-0",children:t.jsxs($.Group,{children:[t.jsx($,{value:"male",children:o("male")}),t.jsx($,{value:"female",children:o("female")})]})})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(h.Item,{name:s.DAY,label:o("day"),rules:_[s.DAY],className:"w-1/3 mb-0",children:t.jsx(x,{className:`${u==m?.FREEKUNDALI?"antDInput":"antDNewInput"}`,suffixIcon:E,showSearch:!0,children:de(me,B).map(e=>t.jsx(I,{value:e,children:e},e))})}),t.jsx(h.Item,{name:s.MONTH,label:o("month"),rules:_[s.MONTH],className:"w-1/3 mb-0",children:t.jsx(x,{className:`${u==m?.FREEKUNDALI?"antDInput":"antDNewInput"}`,suffixIcon:E,showSearch:!0,children:he.map(e=>t.jsx(I,{value:e,children:e},e))})}),t.jsx(h.Item,{name:s.YEAR,label:o("year"),rules:_[s.YEAR],className:"w-1/3 mb-0",children:t.jsx(x,{className:`${u==m?.FREEKUNDALI?"antDInput":"antDNewInput"}`,suffixIcon:E,showSearch:!0,children:ue.map(e=>t.jsx(I,{value:e,children:e},e))})})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(h.Item,{name:s.HOURS,label:o("hour"),rules:_[s.HOURS],className:"w-1/3 mb-0",children:t.jsx(x,{className:`${u==m?.FREEKUNDALI?"antDInput":"antDNewInput"}`,suffixIcon:E,showSearch:!0,children:fe.map(e=>t.jsx(I,{value:e,children:e},e))})}),t.jsx(h.Item,{name:s.MINUTE,label:o("minute"),rules:_[s.MINUTE],className:"w-1/3 mb-0",children:t.jsx(x,{className:`${u==m?.FREEKUNDALI?"antDInput":"antDNewInput"}`,suffixIcon:E,showSearch:!0,children:pe.map(e=>t.jsx(I,{value:e,children:e},e))})}),t.jsx(h.Item,{name:s.SECOND,label:o("second"),rules:_[s.SECOND],className:"w-1/3 mb-0",children:t.jsx(x,{className:`${u==m?.FREEKUNDALI?"antDInput":"antDNewInput"}`,suffixIcon:E,showSearch:!0,children:_e.map(e=>t.jsx(I,{value:e,children:e},e))})})]}),t.jsx(h.Item,{name:s.LOCATION,label:o("birth_place"),rules:Ee,className:"mb-0",children:t.jsx($e,{options:D,onSearch:xe,value:f.getFieldValue(s.LOCATION),open:!M.current&&D.length>0,onSelect:e=>{f.setFieldsValue({[s.LOCATION]:e}),M.current=!0,L(D.find(n=>n.full_name===e))},onChange:e=>{f.setFieldsValue({[s.LOCATION]:e}),M.current=!1},placeholder:o("enter_place_birth"),className:`antDInput w-full mb-0 ${u==m?.FREEKUNDALI?"antDInput":"antDNewInput"}`})}),t.jsx(h.Item,{className:"w-full mb-0",children:t.jsx(te,{type:"primary",htmltype:"submit",className:"w-full  py-3 text-[16px] font-medium",children:o(T?"update_free_kundli":"submit_free_kundli")})})]})]}),u==m?.FREEKUNDALI&&t.jsx(t.Fragment,{children:t.jsxs(ee,{className:"col-span-3 lg:col-span-1 newKundaliCard",children:[t.jsx("h2",{className:"customFormH2 pb-3  ",children:o("save_kundli")}),re?t.jsxs(t.Fragment,{children:[t.jsx(z,{prefix:t.jsx("div",{className:"w-[30px] h-[30px] flex items-center justify-center rounded-full commonLightBack mr-2",children:t.jsx("img",{className:"w-[15px] h-[15px]",src:Pe})}),placeholder:o("search_kundli"),className:"antDInput mb-2",value:k,onChange:e=>Se(e.target.value)}),t.jsx("h4",{className:"text-md font-semibold mb-2",children:o("Recently_Opened")}),t.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:t.jsx(se,{dataSource:H?.KundliMatchList,className:"",renderItem:e=>t.jsx(se.Item,{className:" border-b",children:t.jsxs("div",{className:"grid grid-cols-5 gap-4 w-full cursor-pointer",onClick:()=>Me(e),children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 col-span-4",children:[t.jsx(Ge,{size:28,className:"gradient-background background-cover",children:(e?.name?.[0]||"N").toUpperCase()}),t.jsxs("div",{className:"text-sm",children:[t.jsx("div",{className:"font-semibold text-base capitalize ",children:e?.name||"-"}),t.jsx("div",{className:"text-gray-600  ",children:(e?.dob?e.dob:"")+" "+(e?.time_of_birth?S(e.time_of_birth,A?.TIME_12_HOUR_FORMAT):"")}),t.jsx("div",{className:"text-gray-600  ",children:e?.place_of_birth})]})]}),t.jsxs("div",{className:"flex gap-2 justify-end col-span-1",onClick:n=>n.stopPropagation(),children:[t.jsx("img",{src:Qe,onClick:()=>Ie(e),className:"w-[30px] h-[30px] cursor-pointer",alt:"Edit"}),t.jsx("img",{src:ve,onClick:()=>{Re(p,"free_kundli_delete"),oe(e)},className:"w-[30px] h-[30px] cursor-pointer",alt:"Delete"})]})]})})})})]}):t.jsx("div",{className:"flex flex-col items-center justify-between h-[calc(100%-22px)]",children:t.jsxs("div",{className:"flex flex-col items-center gap-[60px] pt-[60px] h-full w-full",children:[t.jsx("h2",{className:"text-[18px] font-medium text-center text-[#343434] ",children:o("please_login_kundli")}),t.jsxs("div",{className:"flex-1 flex flex-col pb-[25px] justify-between w-full",children:[t.jsx("img",{src:Ve,alt:"Login Required",className:"max-w-[263px] block mx-auto"}),t.jsx(te,{className:"text-white  py-3 uppercase font-semibold",parentClassName:"mt-3 w-full",onClick:()=>p(we({is_model:!0,model_type:"login"})),children:o("login")})]})]})}),t.jsx(Ze,{isPhoneModalOpen:O?.is_model&&O?.model_type==="login",issetIsModalOpen:le}),t.jsx(Je,{isOpen:O?.is_model&&O?.model_type==="free_kundli_delete",title:"Delete Kundli?",description:"Are you sure you want to delete this Kundli? This action cannot be undone.",okText:"Delete",cancelText:"Cancel",onConfirm:Oe,onCancel:()=>{Z(p)}})]})})]})})};export{ws as F};
