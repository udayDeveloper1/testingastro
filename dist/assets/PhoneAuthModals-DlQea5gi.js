const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vendor-Z3tYsDUR.js","./vendor-BI8wlGUX.css","./CustomButton-DXO1S32O.js"])))=>i.map(i=>d[i]);
import{U as Q,aE as P,A as C,aF as p,aj as h,$ as ee,an as te,n as se,_ as R}from"./index-CA7lLIcV.js";import{r as o,n as oe,o as ne,m as re,v as ce,a4 as ae,j as e,R as z}from"./vendor-Z3tYsDUR.js";const le="data:image/webp;base64,UklGRnoEAABXRUJQVlA4WAoAAAAwAAAAHwAAHwAAVlA4TCgBAAAvH8AHEK+goG0bxvxJtzsg5n/+BbIpXgSdbICiMLkkAwDACDB6C+8HgBxJkiJpB5Z5e9L1V3VuqI/+Ef1X4LaN0u0Yxp8AAAAAAAAAAAAAAAAAAAAAgO5RSinlfaxtfZIkybsWJdemaZpmSFfXmgxzBc551GE3YkWBXR0PWajzzLkO79Hehdjay9dR3fnilLQbbl+q+5z9VJJb5cX5QfL++ug7y8f8r7rlTGoz5DgPxCovpV5wTPa4pBw2N9qMH88Cl6NmlgK3bvO47OZ8KzkfXklKvxGbLwnT4ZBRw8kH95KykRxl8vn0Xw7zbBmxdWfIY5EVa9iclmYLFZxL8w3MX5ZxsoKqFJ6kPo/djlNelSG+z8IylExiK7Oov3+myUqRVdZK829qHkVYSUZeAAAATU0AKgAAAAgAAgExAAIAAAAjAAAAJgEyAAIAAAAUAAAASgAAAABQaG90b3BlYSBFZGl0b3IgKHd3dy5waG90b3BlYS5jb20pAAAyMDI1OjA1OjIxIDEzOjE4OjUwAFhNUCDFAgAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyIj4KPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiPgo8L3JkZjpEZXNjcmlwdGlvbj4KPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0idyI/PgA=",ie=z.lazy(()=>R(()=>import("./vendor-Z3tYsDUR.js").then(l=>l.l),__vite__mapDeps([0,1]),import.meta.url)),T=z.lazy(()=>R(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([2,0,1]),import.meta.url)),fe=o.memo(({isPhoneModalOpen:l,issetIsModalOpen:u})=>{oe(t=>t?.masterSlice?.modal);const[m,x]=o.useState(!1),[y,I]=o.useState(""),[E,_]=o.useState(""),L=ne(),i=re(),{t:r}=ce(),O=Q(),w=o.useRef(null),{register:B,handleSubmit:H,reset:ue,getValues:me,watch:Y,setValue:Z,formState:{errors:J},clearErrors:A,setError:N,setFocus:G}=ae(),[c,V]=o.useState({country_code:"91",country_format:"+",short_name:"in"}),g=o.useCallback(t=>{const s=/^\d{10}$/;if(t){if(!s.test(t))return N("phoneNumber",{type:"manual",message:r("invalid_phon_number")}),!1}else return N("phoneNumber",{type:"manual",message:r("enter_mobile_number")}),!1;return A("phoneNumber"),!0},[N,A]),W=o.useCallback((t,s)=>{let n=t.startsWith(`${s.dialCode}`)?t.replace(`${s.dialCode}`,"").trim():t;I(n),V({country_code:s.dialCode,country_format:"+",short_name:s.countryCode}),Z("phoneNumber",n),A("phoneNumber"),g(n)},[Z,A,g]),X=o.useCallback(t=>{if(!g(t?.phoneNumber))return;const s={role:"admin",country_code:`${c?.country_format}${c?.country_code}`,mobile_number:t?.phoneNumber};P(s).then(n=>{n?.code===C?.SUCCESS?(_(n?.data?.otp_code),x(!0),p(i),u(!1),j(60)):(h(n?.message),l(!1),p(i))})},[c,i,u,l,g]),[a,f]=o.useState(["","","",""]),[U,v]=o.useState(""),[d,j]=o.useState(60),b=o.useRef([]),D=o.useCallback((t,s)=>{if(/^\d?$/.test(s)){const n=[...a];n[t]=s,f(n),v(""),s&&t<a.length-1&&b.current[t+1].focus()}},[a]),S=o.useCallback(()=>{const t=a.join("");if(t.length!==4){v("Please enter a valid 4-digit OTP.");return}v(""),K(t)},[a]),F=o.useCallback((t,s)=>{s.key==="Backspace"&&!a[t]&&t>0&&b.current[t-1].focus(),s.key==="Enter"&&S()},[a,S]),K=o.useCallback(t=>{if(d===0){h("OTP expired. Please resend new OTP."),f(["","","",""]),setTimeout(()=>b.current[0]?.focus(),0);return}if(E!==t){h("OTP does not match."),f(["","","",""]),setTimeout(()=>b.current[0]?.focus(),0);return}const s={role:"user",country_code:`${c?.country_format}${c?.country_code}`,mobile_number:y,device_type:"web",device_token:"123"};ee(s).then(n=>{n?.code===C?.SUCCESS?(te(n?.data),_(""),f(["","","",""]),x(!1),u(!1),i(se({is_login:!0,loginUserData:n?.data})),p(i),L(O?.HOMEPAGE),j(0)):(h(n?.message),p(i))})},[E,c,y,i,L,u,d]),M=o.useCallback(()=>{const t={role:"admin",country_code:`${c?.country_format}${c?.country_code}`,mobile_number:y};P(t).then(s=>{if(s?.code===C?.SUCCESS){_(s?.data?.otp_code),x(!0),u(!1),j(60);const n=a.findIndex(q=>q==="");n!==-1&&b.current[n].focus()}else h(s?.message)})},[c,y,u,a]);o.useEffect(()=>{if(!m||d<=0)return;const t=setTimeout(()=>j(d-1),1e3);return()=>clearTimeout(t)},[m,d]),o.useEffect(()=>{if(m){const t=a?.findIndex(s=>s==="");t!==-1&&b.current[t].focus()}},[m,a]),o.useEffect(()=>{G("phoneNumber")},[G]),o.useEffect(()=>{if(l&&w.current){const t=setTimeout(()=>w.current.focus(),200);return()=>clearTimeout(t)}},[l]);const k=o.useCallback(()=>{p(i),u(!1),x(!1),f(["","","",""])},[i,u]),$=Y("phoneNumber");return o.useEffect(()=>(m?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[m]),o.useEffect(()=>(l?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[l]),e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-opacity-30 bg-[#00000080] z-50 reactPhone p-[15px]",children:e.jsxs("div",{className:"bg-white rounded-lg box_shadow_common w-full md:w-[450px] min-h-[320px]",children:[e.jsxs("div",{className:"bg_website_color p-4 flex justify-between items-center rounded-t-lg",children:[e.jsx("h2",{className:"text-white text-[18px] font-semibold mb-0",children:r("continue_phone")}),e.jsx("button",{onClick:k,style:{color:"white"},className:"text-xl !text-white cursor-pointer",children:"✖"})]}),e.jsx("form",{onSubmit:H(X),children:e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-[16px] new_body_font font-[400] my-4 leading-[25px]",children:r("recive_a_code")}),e.jsx("p",{className:"text-[16px] font-semibold new_body_font pb-4",children:r("enter_your_number")}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"aspect-square w-12 rounded-[5px] bg_website_color flex items-center justify-center",children:e.jsx("img",{src:le,alt:"call",className:"block object-contain"})}),e.jsx(ie,{country:"in",value:c?.country_code,onChange:W,inputClass:"w-full border border-gray-300 rounded-md px-3 py-2 h-full",inputProps:{ref:w}}),e.jsx("input",{type:"hidden",...B("phoneNumber",{required:r("enter_mobile_number")})})]}),e.jsx("label",{className:"errorc pt-1 mt-1",children:J?.phoneNumber?.message})]}),e.jsx(T,{type:"submit",className:"w-full py-2",parentClassName:"mt-6",children:r("get_otp")}),e.jsxs("p",{className:"text-[14px] new_body_font text-start font-[400] mt-5 mb-4",children:[r("sign_up_you"),e.jsx("span",{className:"website_color cursor-pointer ms-1",children:r("terms_of_use")})," ",r("and"),e.jsx("span",{className:"website_color cursor-pointer ms-1",children:r("privarcy_policy")})]})]})})]})}),m&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-opacity-30 bg-[#00000080] z-50 p-[15px] modelBodyCss",children:e.jsxs("div",{className:"bg-white rounded-lg box_shadow_common w-full md:w-[450px] min-h-[290px]",children:[e.jsxs("div",{className:"bg_website_color p-4 flex justify-between items-center rounded-t-lg",children:[e.jsx("h2",{className:"text-lg text-white font-semibold mb-0",children:r("verify_otp")}),e.jsx("button",{onClick:k,className:"text-xl text-white cursor-pointer",children:"✖"})]}),e.jsxs("div",{className:"p-6 flex flex-col items-center justify-between",children:[e.jsxs("p",{className:"text-[16px] font-[400] text-gray mt-2",children:["OTP sent to"," ",e.jsx("span",{className:"font-semibold new_body_font",children:`${c.country_format}${c?.country_code+" "}${$}`})]}),e.jsx("div",{className:"flex justify-center gap-3 mt-4",children:a.map((t,s)=>e.jsx("input",{ref:n=>b.current[s]=n,type:"number",maxLength:"1",className:"w-12 aspect-square text-center border border-gray-300 rounded-md text-lg outline-none",value:t,placeholder:"",onChange:n=>D(s,n.target.value),onKeyDown:n=>F(s,n)},s))}),e.jsx("label",{className:"errorc pt-1 mt-1",children:U}),e.jsx(T,{className:"w-full py-2",parentClassName:"mt-6 w-full",onClick:S,children:"LOGIN"}),e.jsx("div",{className:"text-[14px] font-normal text-center mt-4 mb-0 w-full flex justify-between",children:d!==0?e.jsxs("span",{children:["Resend OTP available in"," ",e.jsxs("span",{className:"website_color",children:[String(d).padStart(2,"0"),"s"]})]}):e.jsx("span",{className:"website_color cursor-pointer font-bold",onClick:M,children:"Resend OTP"})})]})]})})]})});export{fe as default};
