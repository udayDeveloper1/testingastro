const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CustomButton-DXO1S32O.js","./vendor-Z3tYsDUR.js","./vendor-BI8wlGUX.css","./ConfirmModal-CWGZRiNR.js","./index-CA7lLIcV.js","./index-DiIoS1Mn.css","./CustomWhiteButton-DxPqXzdC.js"])))=>i.map(i=>d[i]);
import{_ as G,C as ce,U as Ve,aV as Be,o as ne,aF as z,A as _,aW as He,as as Je,aX as Ke,y as R,u as L,aY as qe,aZ as Xe,aj as Ae,a_ as Qe,aq as $e,a$ as et,am as tt,n as st}from"./index-CA7lLIcV.js";import{R as S,r as s,j as e,af as _e,ak as at,ao as rt,_ as nt,ap as ot,m as be,al as it,aq as ct,v as lt,n as oe,U as dt,o as mt,am as ye,ar as ut,as as xt,aa as ht,at as pt,y as ie}from"./vendor-Z3tYsDUR.js";import{n as gt}from"./No_Data_Found-BlLxs6qj.js";import ft from"./PhoneAuthModals-DlQea5gi.js";import At from"./CustomWhiteButton-DxPqXzdC.js";import yt from"./MoneyWallet-C0ynbKIR.js";import _t from"./PaymentDetails-BLDoEZEC.js";import{L as bt}from"./Loader2-B0yoAr14.js";import"./CommonBanner-DOXs5XQw.js";import"./NavigationPage-BHG-iaEe.js";import"./loader4-dvcpAguw.js";import"./ConfirmModal-CWGZRiNR.js";const jt=""+new URL("astro2-CIEZ7fCP.webp",import.meta.url).href,wt="data:image/webp;base64,UklGRsIHAABXRUJQVlA4WAoAAAAwAAAAJQAAJAAAVlA4THAEAAAvJQAJEL8HR7Jt1craZ9/73vu/HIfoR5D6HGyi7paSuaZMgpDs+yDgSLKtupm5R8yYq7T/vUgRmu2II8aCHUmSq6gareETs/DfCq3udqYIsm1xT7ArBBAAEWg01jeXd0AHdCbocAUnTK464HB7ftX5gpXd1VXVwfFu/6KJneXL++OyBP6/pmt0UDUGJf29OpI6LRTNUgUGUShSquDpbrl6Ew5mO42UYMoUCgYZGBAEcBUHOciFKu3hfBsB/9nB+uP2YlkqUFgZtEarVQ00Wm2uN5zvdludDTO9odFCq1O/OmxKJYv+fyYx0616k/L7Mn1R6k3KTE/YEvznYdHyYHi6W2552JqtVgZFQ41WKYNaUz/3i9ZmQ71dRFzsNlselka7FUEZFUFZerxdJCJKAlYQVggIK4QRwkJgIAQCIARCIUSEEgglgGEFgTIYKBFWEAgrKwgXhCBCSbhgBRFKwCUIK0QSoUQgQt0c1oNAGCFEyCYAgRAIBSEwEEZTpFAIAYhQAggIo4ESmNwIhBIRNggUhEAgBITAQIkI2iRRAAIRCCEAYeXSVFfYJqkQVgKIQKPZSa9VKBlWkIVt29lIXtu2bduzts3xtMO1bduj7qDdTccqtlx7kLVtPOeLpKvjiP4rcNtG6Y4Zuj4CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCpfs6Sz47F9uJePWvCo4GAscDzcK85fSE4dWcshtDoW7hmjOROUOl8/rJID6DrnZLTPaSExRac3nRtVRTaqzw73ivXXKkN1i02WC9dHV5WJoifCVTEabVKqTm+yXlh7UxzTVF6YEh4Zp1YkhOmMS+xr1mWLd+4ObyZvoVM+p4Wg1IzFJvv5G9ninXv3n4xtLo2C4V4xaiExbb5hyfJLN26Km7c/2vn85bgWkqGvyletSE7L0pvsq69t2HTn7v2dz1+/Ozi4sFSm8vFXBKbqjCb7lWvZ4ta7D3Y+3/fm/eeh+SRCv3i1Ijg102BaeWHtzbw7dx88fr7vzcdDX7pIoESMn5CUNrBWnXr1GzRq3KTpgF0vXh34dPjoZKlub7WgTC3zi2MUf/z85f6DR45+K/LrWCzGT5GQ1r9i7bqVGzSs2qTaoMe797798PnrJIm8T4wmIClVd9Zkv3w1W7yz/eHOPS/ffPj8teevYyFVjJ8iOSXTYLJdWJ+9ccu9+0+fv3z3/vP4/L9G7+jvQ8IWGE22C9dyxDt37z95tvfdwSFuEvQPj45RK4LSdYtMtos3cnLvbN/x5NnLiW2kVuk1L9pHo00I1Z1dtmLVjWxx67b7O2f1cJckxohwVZyfkPT9z21rrueIW+/O7Owuh9dzVT4aQZmmM5jsF9bduj2ju7scwrY8Hu4VoxESUnTGpdYLa6d3cpVH/rYnIqLi/AVl6MLFZtu0ji5y/a318XBVrEahTNXpJ3Rzke+7pU6Ee/qotcqQqR0cE5Z24apYP61HWUnxkeFK5WqUlqdP/ztZBUVYSUZeAAAATU0AKgAAAAgAAgExAAIAAAAjAAAAJgEyAAIAAAAUAAAASgAAAABQaG90b3BlYSBFZGl0b3IgKHd3dy5waG90b3BlYS5jb20pAAAyMDI1OjA1OjIxIDExOjA4OjAxAFhNUCDFAgAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyIj4KPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiPgo8L3JkZjpEZXNjcmlwdGlvbj4KPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0idyI/PgA=",vt=S.lazy(()=>G(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([0,1,2]),import.meta.url)),{TextArea:St}=nt,It=S.memo(({visible:m,onClose:p,onSubmit:g,expertName:n="",imageUrl:c,astrologerId:f=""})=>{const[u,j]=s.useState(null),[x,h]=s.useState(""),[d,A]=s.useState(""),o=s.useMemo(()=>"https://i.pravatar.cc/100",[]),i=s.useCallback(l=>{j(l),d&&A("")},[d]),b=s.useCallback(()=>{if(!u){A("Minimum one star is required");return}const l={astrologer_id:f,rating:u,review:x.trim()};g?.(l),p(),j(null),h(""),A("")},[u,x,f,g,p]);return e.jsxs(_e,{open:m,onCancel:p,footer:null,closeIcon:e.jsx(ot,{style:{color:"white"}}),centered:!0,width:500,className:"custom-rating-modal",children:[e.jsx("div",{className:"bg-[#f3e8ff] px-4 py-3 flex items-center justify-between rounded-t-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(at,{size:40,src:c||o}),e.jsx("span",{className:"text-sm font-semibold",children:n})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("p",{className:"text-center font-semibold text-base mb-4",children:"How likely are you to promote the expert?"}),e.jsxs("div",{className:"bg-white border border-[#E5E7EB] p-3 rounded-lg flex items-center",children:[e.jsx("p",{className:"text-[18px] font-bold mb-0 pe-5",children:"Ratings:"}),e.jsx(rt,{allowHalf:!0,value:u,onChange:i,style:{fontSize:"35px",color:"#6C2BD9"}})]}),d&&e.jsx("p",{className:"text-red-500 text-sm mt-1 px-1",children:d}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2 px-1",children:[e.jsx("span",{children:"Not Likely"}),e.jsx("span",{children:"Very Likely"})]}),e.jsx("div",{className:"mt-5",children:e.jsx(St,{rows:4,placeholder:"Write your review here ðŸ˜ƒ",value:x,onChange:l=>h(l.target.value),className:"rounded-md"})}),e.jsx("div",{className:"w-full",children:e.jsx(vt,{block:!0,className:"mt-6 bg-[#6C2BD9] text-white w-full rounded-md font-semibold py-2 text-sm hover:bg-[#5822b1] transition-all",onClick:b,children:"SUBMIT"})})]})]})}),Nt=s.lazy(()=>G(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([0,1,2]),import.meta.url));function Dt({isOpen:m,title:p="Are you sure?",description:g="This action cannot be undone.",okText:n="Yes",cancelText:c="Cancel",onCancel:f,imageSrc:u="",imgClass:j="",onPaymentSuccess:x}){const[h,d]=s.useState(!1),[A,o]=s.useState({}),[i,b]=s.useState(!1);be();const l=async()=>{d(!0)};return e.jsxs(_e,{open:m,title:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(it,{className:"text-[#E3725D] text-xl"}),p]})}),onCancel:f,footer:[e.jsx(e.Fragment,{children:e.jsx(e.Fragment,{children:(c!==""||n!=="")&&e.jsxs("div",{className:"flex justify-end gap-3",children:[c!==""&&e.jsx(At,{onClick:f,className:`rounded-md border px-5 py-2 ${i||h?" hover:!bg-[#ffff] hover:!text-[#e3725d] !text-white":""}`,children:c},"cancel"),n!==""&&!i&&!h&&e.jsx(Nt,{onClick:l,className:" bg-[#e3725d] hover:bg-[linear-gradient(90deg,_#C32853_0%,_#EE7E49_100%)] text-white rounded-md px-5 py-2",children:n},"confirm")]})})})],centered:!0,className:"custom-confirm-modal custom_payment_modal",children:[h&&e.jsx(yt,{openInModel:!0,handlePriceCardClick:M=>{o(M),b(!0),d(!1)}}),i&&e.jsx(_t,{paymentDetailsData:A,openInModel:!0,onPaymentSuccess:()=>{x(),d(!1),b(!1)}})]})}const Ct=ce.SOCKETURL,Et=(m,p,g)=>ct(`${Ct}/socket?user_id=${m}&target_id=${p}&free_chat=${g}`,{query:{user_id:m},transports:["websocket"]}),Rt=s.forwardRef(({minutes:m,seconds:p,setTime:g,isSocketConnected:n,freeChatComplete:c,is_freechat_count:f,onApiCall:u},j)=>{const x=s.useRef(null),h=s.useRef(!1),d=s.useRef(!1);s.useImperativeHandle(j,()=>({pauseTimer:()=>{h.current=!0},resumeTimer:()=>{h.current=!1}})),s.useEffect(()=>{if(!n){clearInterval(x.current);return}return d.current=!1,x.current=setInterval(()=>{h.current||(f>0?g(o=>o.seconds>0?{...o,seconds:o.seconds-1}:o.minutes>0?(u(),{minutes:o.minutes-1,seconds:59}):(clearInterval(x.current),d.current||(d.current=!0,c()),o)):g(o=>{const i=o.seconds+1,b=o.minutes+Math.floor(i/60);return o.seconds===1&&u(),{minutes:b,seconds:i%60}}))},1e3),()=>clearInterval(x.current)},[n,f,u,g,c]);const A=o=>o<10?`0${o}`:o;return e.jsxs("p",{className:"font-semibold mb-0 text-end",children:[A(m),":",A(p)]})}),Lt=S.memo(Rt),Mt=s.lazy(()=>G(()=>import("./CustomButton-DXO1S32O.js"),__vite__mapDeps([0,1,2]),import.meta.url)),Tt=s.lazy(()=>G(()=>import("./ConfirmModal-CWGZRiNR.js"),__vite__mapDeps([3,4,1,2,5,6]),import.meta.url)),Yt=()=>{const{t:m}=lt(),p=Ve(),{is_login:g,loginUserData:n}=oe(t=>t?.masterSlice?.loginUser);let c=localStorage.getItem(ce.AUTH_KEY)?JSON.parse(localStorage.getItem(ce.AUTH_KEY))?._id:"";const{is_model:f,model_type:u}=oe(t=>t?.masterSlice?.modal),[j,x]=s.useState(!1),[h,d]=s.useState(!1),A=s.useRef(null),{chatAstroId:o}=dt(),[i,b]=s.useState({}),[l,M]=s.useState(""),[I,O]=s.useState(null),[T,le]=s.useState(""),[N,P]=s.useState([]),[je,Ut]=s.useState(jt),[de,D]=s.useState(!1),[Y,F]=s.useState({minutes:0,seconds:0}),[kt,we]=s.useState(""),[ve,Se]=s.useState(""),[V,B]=s.useState({}),[U,Zt]=s.useState(n?.is_freechat_count||0),me=s.useRef(0),[C,H]=s.useState(!1),[k,E]=s.useState(!1),[J,K]=s.useState(!1),q=s.useRef(null),[Ie,ue]=s.useState(!0),xe=new Date,he=new Date;he.setDate(xe.getDate()-1);const pe=mt(),y=be(),w=oe(t=>t?.AstroDetailsDataSlice?.astroDetails),Ne=async()=>{+U>0?F({minutes:+n?.freechat_duration,seconds:0}):F({minutes:0,seconds:0})},De=async()=>{q.current?.resumeTimer()},Z=()=>{q.current?.pauseTimer()},Ce=async t=>{try{const r=await Qe({astrologer_id:t});r.code===1&&y($e(r.data))}catch(a){console.log(a,"error")}},Ee=async t=>{try{const a=await qe(t);a.code===1?ie.success(a.message):ie.error(a.message)}catch(a){ie.error(a?.response?.data?.message)}},ge=()=>{if(I&&T.trim()){const t={chat_room_id:"",sender_id:c,sender_type:"user",receiver_id:l,receiver_type:"astrologer",message:T,message_type:"",image:"",attachment:"",attachment_type:"",free_chat:i.is_ai_chat=="1",userDetails:{name:n?.name||"hello User",dob:L(n?.dob,"DD-MM-YYYY")!=="Invalid date"?L(n?.dob,"DD-MM-YYYY"):"01-01-2000",tob:R(n?.time_of_birth,"hh:mm A")!=="Invalid date"?R(n?.time_of_birth,"hh:mm A"):"01:11 PM",place:n?.place_of_birth||"Amreli, Gujarat, IN"}};I.emit("send_message",t),le("")}},X=(t,a)=>t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate(),Re=t=>X(t,xe)?"Today":X(t,he)?"Yesterday":t.toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}),Le=async()=>{ue(!0);try{let t=await He(o);b(t),Se(t?.sessionID),y(Je(t));let a="";if(t.chatType==="history"){a=t?.receiver_id,M(t?.receiver_id);try{let r={chat_room_id:t?._id};const W=await Ke(r);if(W?.code===1){let te=null;const Fe=(W?.data).map(se=>{const ae=new Date(se.created_at);let re=null;return(!te||!X(te,ae))&&(re=Re(ae),te=ae),re&&(se.timeStampLabel=re),se});P(Fe)}}catch(r){console.log(r)}}else a=t?._id,M(t?._id),P([]);Object?.keys(w)?.length===0&&Ce(a)}catch(t){console.error(t)}ue(!1)},Q=async()=>{try{let t={astrologer_id:l,chat_duration_minutes:1,amount:+U>0?0:1*+w?.price_per_min,is_free:+U>0,session_id:ve};const a=await et(t);if(a?.code===_?.SUCCESS){let r={total_wallet_balance:a?.data?.total_wallet_balance};tt(y,g,n,st,r),a?.data?.is_free==="true"&&Y.minutes===0&&Y.seconds===0&&pe(`${p?.CHATWITHASTROLOGERS}`)}else a?.code===_.INVALID_OR_FAIL&&(v(),ne(y,"openRecharge"),Z())}catch(t){console.log(t)}},Me=async()=>{try{+n?.total_wallet_balance>+w?.price_per_min||+n?.is_freechat_count>0?Q():(v(),ne(y,"openRecharge"),Z())}catch{}},Te=()=>{A.current?.scrollIntoView({behavior:"smooth"})},Ye=(t,a)=>{if(t==="new"){let r={chat_room_id:"",sender_id:c,sender_type:"user",receiver_id:l,receiver_type:"astrologer",message:`name: ${n?.name||"Kim Jong Un"}
              dob: ${L(n?.dob,"DD-MM-YYYY")!=="Invalid date"?L(n?.dob,"DD-MM-YYYY"):"01-01-2000"}
              tob: ${R(n?.time_of_birth,"hh:mm A")!=="Invalid date"?R(n?.time_of_birth,"hh:mm A"):"01:11 PM"}
              place: ${n?.place_of_birth||"Amreli, Gujarat, IN"} 
              Hello ${i?.name||"Hello Userji"}Ji,
              Jay Shree Krishna !! 
              `,message_type:"",image:"",attachment:"",attachment_type:"",free_chat:i.is_ai_chat=="1",userDetails:{name:n?.name||"Kim Jong Un",dob:L(n?.dob,"DD-MM-YYYY")||"01-01-2000",tob:R(n?.time_of_birth,"hh:mm A")||"01:11 PM",place:n?.place_of_birth||"Amreli, Gujarat, IN"}};a.emit("send_message",r)}},fe=(t=!1)=>{if(!I&&c&&l||t){const a=Et(c,l,i.is_ai_chat=="1");O(a),a.on("connect",()=>{}),a.on("disconnect",r=>{D(!1),console.log("Disconnected:",r)}),a.on("connect_error",r=>{D(!1),console.error("Connection error:",r.message)}),a.on("chat_status",r=>{we(r?.code===_.SUCCESS?"Online":"Waiting..."),r?.code===_.SUCCESS||r?.code===""?(O(a),D(!0),i.chatType==="new"&&me.current===0?(me.current=1,Ye(i.chatType,a),Ne()):De(),H(!1),K(!1),E(!1)):r?.code===_.NO_DATA_FOUND||r?.code===_.INVALID_OR_FAIL?(B(r||{}),H(!0),K(!1),E(!1)):r?.code===_.DELETE_ACCOUNT?(H(!1),K(!0),E(!1)):r?.code===_.ASTROLOGER_DISCONNECTED?(Z(),E(!0)):(D(!1),v(),E(!1))}),a.on("send_message",r=>{P(W=>[...W,r?.data])}),a.on("typing",r=>{B(r)}),a.on("stop_typing",r=>{B(r||{})}),a.on("send_message_error",r=>{console.log("send_message_error:",r?.message)})}},v=async()=>{I&&(I.disconnect(),O(null),D(!1))},$=async()=>{if(i?.AstroData)try{const t={chat_request_id:i?.AstroData?._id,conversation_types:i?.AstroData?.conversation_types,astro_request:"",user_request:"2",is_active:"",is_delete:""};(await Xe(t)).code===_.SUCCESS||Ae(response.message)}catch(t){Ae(t.message)}},ee=async()=>{pe("/")},Ue=async()=>{try{await fe(),await Q(),await z(y)}catch{}},ke=async()=>{Q(),Z(),$(),ee()},Ze=S.memo(({message:t,isUser:a,time:r})=>e.jsx("div",{className:`flex ${a?"justify-end":"justify-start"} px-2 md:px-6 my-2 mb-4`,children:e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("div",{className:`max-w-md px-5 py-3 text-[16px] font-medium rounded-lg leading-[180%] ChatMessage
          ${a?"bg_website_color text-white rounded-br-none self-end":"commonLightBack text-[#333333] rounded-bl-none"}`,dangerouslySetInnerHTML:{__html:t}}),e.jsx("div",{className:`text-[16px] font-normal text-gray-500 mt-1 w-full text-end leading-5 ${a?"text-right text-[#e3725d] self-end pr-1":"text-gray-500 pl-1"}`,children:r})]})}),[T]),We=s.useMemo(()=>N?.map((t,a)=>e.jsxs(S.Fragment,{children:[t?.timeStampLabel&&e.jsx("div",{className:"text-center text-[#A1A1A1] text-xs mb-7 flex justify-center sticky top-0 left-0 max-w-[150px] min-w-[150px] mx-auto",children:e.jsx("p",{className:"min-w-max max-w-max commonLightBack bg-opacity-10 text-[#e3725d] px-4 py-2 rounded-md font-medium text-[14px] mb-0 shadow-[0_2px_8px_0_rgba(99,99,99,0.2)]",children:t?.timeStampLabel})}),Object.keys?.(t)?.length>2&&e.jsx(Ze,{isUser:t?.sender_type==="user",message:t?.message,time:Be(t?.created_at)||""})]},t?.created_at)),[N]),ze=()=>e.jsxs("div",{className:"website_color w-full",children:[" ",e.jsx("p",{className:"text-center mb-0 text-[12px] sm:text-[16px]",children:"Your request has been sent to the astrologer! Please wait a moment while we connect you. Thank you for your patience!"})]}),Ge=()=>e.jsxs("div",{className:"website_color w-full",children:[" ",e.jsx("p",{className:"text-center mb-0 text-[12px] sm:text-[16px]",children:"Sorry, Right now our all astrologer are busy, Please wait while to connect or try again after sometime !!"})]}),Oe=s.useMemo(()=>C===!1&&J===!1&&k===!1,[C,J,k]);if(!c)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg_website_color text-white py-3 px-7 flex items-center gap-4 rounded-t-xl",children:[e.jsx(ye,{icon:ut,className:"w-8 h-8 rounded-full border-2 border-white p-3"}),e.jsx(ye,{icon:xt,className:"text-[50px] text-white"})]}),e.jsx("div",{className:"h-[450px] overflow-y-auto py-5 pb-12 bg-white leading-none flex items-center justify-center",children:e.jsx(Mt,{className:" text-white px-4 py-2 rounded-md  border ",onClick:()=>d(!0),children:m("login")})}),e.jsxs("div",{className:"bg-[#F7F2FD] px-4 py-3 flex items-center gap-3 rounded-b-xl",children:[e.jsx("textarea",{placeholder:"Write your message",className:"rounded-full px-4 py-2 flex-1 bg-white text-[16px] font-medium chatInput",disabled:!0}),e.jsx(ht,{className:"text-xl text-gray-500 cursor-pointer",disabled:!0}),e.jsx(pt,{className:"text-xl text-[#6A1B9A] cursor-pointer",disabled:!0})]}),e.jsx(ft,{isPhoneModalOpen:h,issetIsModalOpen:d})]});const Pe=s.useCallback(t=>{t.target.onerror=null,t.target.src=je},[]);return s.useEffect(()=>(c!==""&&l!==""?fe():v(),()=>{v()}),[c,l]),s.useEffect(()=>{Le();const t=a=>{a.preventDefault(),a.returnValue=""};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[]),s.useEffect(()=>{Te()},[N]),Ie?e.jsx(bt,{}):e.jsx(e.Fragment,{children:e.jsxs("section",{className:" chat_section",children:[e.jsx("div",{className:"container mx-auto py-2",children:e.jsx("div",{className:"bg-white rounded-[10px] shadow-md overflow-hidden",children:e.jsxs("div",{children:[e.jsx("div",{className:"shadow-[rgba(0, 0, 0, 0.35) 0px 5px 15px] relative z-[1]",children:e.jsxs("div",{className:"bg_website_color text-white py-3 px-2 md:px-5 lg:px-7 flex items-center gap-2 sm:gap-4 rounded-t-xl justify-between flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap sm:flex-nowrap",children:[e.jsx("img",{src:w?.profile_image,alt:"astrologer",className:"w-8 h-8 sm:w-15 sm:h-15 rounded-full border-2 border-white bg-white object-cover",onError:t=>Pe(t),loading:"lazy",decoding:"async",width:60,height:60}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"text-[14px] sm:text-[20px] font-bold capitalize break-all",children:w?.name}),V?.role?e.jsxs("div",{className:"text-[14px] font-medium capitalize break-all",children:[V?.role," ",V?.role&&" typing..."]}):e.jsx(e.Fragment,{children:C?e.jsx("p",{className:"mb-0 text-[12px]",children:"Waiting for Astrologer..."}):e.jsx(e.Fragment,{children:k?e.jsx("p",{className:"mb-0 text-[12px]",children:"Astrologer Disconected"}):e.jsx(e.Fragment,{})})})]})]}),e.jsxs("div",{className:"text-[16px] font-normal relative min-w-[130px] min-h-[21px] flex items-center",children:[e.jsx(Lt,{ref:q,freeChatComplete:ke,minutes:Y.minutes,seconds:Y.seconds,setTime:F,is_freechat_count:U,isSocketConnected:de,onApiCall:Me}),e.jsx("button",{className:"text-[12px] sm:text-[16px] border border-white py-2 px-2 sm:px-5 ms-3 rounded-sm cursor-pointer transition-all bg-white text-[#e3725d] font-bold hover:text-white hover:bg-[linear-gradient(90deg,_#C32853_0%,_#EE7E49_100%)]",onClick:()=>{ne(y,"end_chat")},children:"End Chat"})]})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:`overflow-y-auto py-5 pb-12 bg-white leading-none chatbox_sec ${N.length===0?"flex items-center justify-center":""}`,children:[We,N?.length===0&&e.jsxs("div",{className:"px-5 block mx-auto text-center",children:[e.jsx("img",{src:gt,alt:"no-data-found ",className:"max-w-[300px] block object-contain mx-auto "}),e.jsx("div",{className:"website_new_color ",children:e.jsx("p",{className:"text-[35px] font-bold mb-0 -mt-8 leading-[150%]",children:C?"Waiting for Astrologer...":"No Chat Found."})})]}),e.jsx("div",{ref:A})]})}),e.jsx("div",{className:"commonLightBack px-2 sm:px-4 py-2 sm:py-5 flex items-center gap-3 rounded-b-xl ",children:Oe?e.jsxs(e.Fragment,{children:[" ",e.jsx("textarea",{value:T,onChange:t=>le(t.target.value),onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),ge())},placeholder:"Write your message",className:"rounded-full px-4 !py-3 flex-1 bg-white text-[16px] font-medium chatInput"}),e.jsx("img",{src:wt,alt:"send",width:25,height:26,onClick:ge,decoding:"async",loading:"lazy",className:` ${de?"cursor-pointer":"cursor-not-allowed"}`})]}):C===!0?e.jsx(ze,{}):J||k?e.jsx(Ge,{}):null})]})})}),e.jsx(It,{visible:j,onClose:()=>x(!1),onSubmit:Ee,expertName:w?.name,astrologerId:l,imageUrl:w?.profile_image}),e.jsx(Dt,{isOpen:f&&u=="openRecharge",title:"Want to Continue Chat Or Exit",description:"",okText:"Recharge Now",cancelText:"Cancel",onPaymentSuccess:Ue,onCancel:()=>{z(y),$(),ee()}}),e.jsx(Tt,{isOpen:f&&u==="end_chat",title:m("you_want_to_end_chat"),description:m("you_want_to_end_chat_descreption"),okText:m("end_chat"),cancelText:m("cancel"),onConfirm:()=>{v(),$(),z(y),ee()},onCancel:()=>{z(y)}})]})})},Xt=S.memo(Yt);export{Xt as default};
